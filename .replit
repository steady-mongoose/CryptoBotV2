modules = ["python-3.11"]

[nix]
channel = "stable-24_05"

[workflows]
runButton = "Run Bot (Rate Limited)"

[[workflows.workflow]]
name = "Test Discord"
author = 43339402
mode = "sequential"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "python bot_v2.py --test-discord"

[[workflows.workflow]]
name = "Post to X"
author = 43339402
mode = "sequential"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "python bot_v2.py"

[[workflows.workflow]]
name = "Run Bot (Rate Limited)"
author = 43339402
mode = "sequential"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"üöÄ Starting CryptoBot with rate limiting protection...\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "python bot_v2.py"

[[workflows.workflow]]
name = "Run Bot (Slower Posting)"
author = 43339402
mode = "sequential"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"üêå Starting CryptoBot with extended delays for free tier rate limits...\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "python bot_v2.py"

[deployment]
deploymentTarget = "gce"
run = ["sh", "-c", "python bot_v2.py"]
build = ["sh", "-c", "mkdir -p data && python -m pip install --upgrade pip && pip install -r requirements.txt"]
ignorePorts = true

[[ports]]
localPort = 8080
externalPort = 80

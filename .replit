modules = ["python-3.11"]

[nix]
channel = "stable-24_05"

[workflows]
runButton = "Main Bot Run"

[[workflows.workflow]]
name = "Main Bot Run"
author = 43339402
mode = "sequential"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "python bot_v2.py --queue-only"

[[workflows.workflow]]
name = "Post to Discord"
author = 43339402
mode = "sequential"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "python bot_v2.py --test-discord"

[[workflows.workflow]]
name = "Check Queue Status"
author = 43339402
mode = "sequential"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "python check_queue_status.py"

[[workflows.workflow]]
name = "Test Discord Only"
author = 43339402
mode = "sequential"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo 'ðŸ§ª Testing Discord webhook posting...'"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "python bot_v2.py --test-discord"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo 'âœ… Discord test completed!'"

[[workflows.workflow]]
name = "Content Verification Report"
author = 43339402
mode = "sequential"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "python content_verification_report.py"

[deployment]
run = ["sh", "-c", "python bot_v2.py --queue-only"]
build = ["sh", "-c", "mkdir -p data && python -m pip install --upgrade pip && pip install -r requirements.txt"]
ignorePorts = true

[[ports]]
localPort = 8080
externalPort = 80

[[ports]]
localPort = 8081
externalPort = 8081
